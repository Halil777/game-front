import{r as l,I as g,b as p,d as u,f as x,j as e,E as f}from"./index-jANN_1GL.js";import{u as j,m as s,C as c}from"./index-C7gP4WBc.js";/* empty css                   */import{B as y}from"./baseUrl-DACQt1tI.js";import{R as v,C as w}from"./row-BRXMfEcx.js";import"./responsiveObserver-BuATd_CN.js";var b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},E=function(t,a){return l.createElement(g,p({},t,{ref:a,icon:b}))},_=l.forwardRef(E);const A=async i=>{const t=localStorage.getItem("token");if(!t)throw new Error("Token not found in localStorage");const a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({page:1,size:20,sort:"sort_by_date_desc",location:"LOCAL"})});if(!a.ok){const o=await a.json();throw console.error("API Error:",o),new Error(o.message||"An error occurred while fetching data")}return a.json()},L="http://88.218.60.127:5678",O={hidden:{opacity:0,y:50},visible:{opacity:1,y:0}},B=()=>{const{t:i}=u(),{data:t,error:a}=x(`${L}/game/admin/get-games`,A),[o,d]=j({triggerOnce:!0});if(a)return console.error("Error loading games:",a),e.jsxs("div",{children:["Error loading games: ",a.message]});if(!t)return e.jsx("div",{children:"Loading..."});const m=(Array.isArray(t==null?void 0:t.games)?t.games:[]).filter(r=>r.location==="LOCAL");return e.jsx("div",{className:"local-games-container",children:e.jsxs("div",{className:"container",children:[e.jsxs(s.div,{className:"intro-section",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[e.jsx("h1",{children:i("games.title")}),e.jsx("p",{children:i("games.description")})]}),e.jsx(s.div,{className:"games-section",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},ref:o,children:e.jsx(v,{gutter:[16,16],children:m.map((r,h)=>{var n;return e.jsx(w,{xs:24,sm:12,md:8,lg:6,children:e.jsx(s.div,{initial:"hidden",animate:d?"visible":"hidden",variants:O,transition:{duration:.5,delay:h*.1},children:e.jsx(c,{hoverable:!0,cover:e.jsx("img",{alt:r.title_en,src:`${y}/${(n=r.assets[0])==null?void 0:n.url}`,style:{height:"200px",objectFit:"cover"}}),children:e.jsx(c.Meta,{title:e.jsx("span",{className:"game-title",children:r.title_en}),description:e.jsx("div",{className:"download-section",children:e.jsx(f,{type:"link",href:r.site_url,target:"_blank",icon:e.jsx(_,{}),children:"Download Game"})})})})})},r.id)})})})]})})};export{B as default};
