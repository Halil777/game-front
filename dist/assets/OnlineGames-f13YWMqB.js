import{d as h,f as u,j as e}from"./index-jANN_1GL.js";import{u as p,m as o,C as c}from"./index-C7gP4WBc.js";const y=async t=>{const s=localStorage.getItem("token");if(!s)throw new Error("Token not found in localStorage");const a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({page:1,size:20,sort:"sort_by_date_desc",location:"GLOBAL"})});if(!a.ok){const i=await a.json();throw console.error("API Error:",i),new Error(i.message||"An error occurred while fetching data")}return a.json()},l="http://88.218.60.127:5678",j={hidden:{opacity:0,y:50},visible:{opacity:1,y:0}},w=()=>{const{t}=h(),{data:s,error:a}=u(`${l}/game/admin/get-games`,y),[i,d]=p({triggerOnce:!0});if(a)return console.error("Error loading games:",a),e.jsxs("div",{children:["Error loading games: ",a.message]});if(!s)return e.jsx("div",{children:"Loading..."});const m=(Array.isArray(s==null?void 0:s.games)?s.games:[]).filter(r=>r.location==="GLOBAL");return e.jsxs("div",{className:"online-games-container",children:[e.jsx("h2",{className:"games-heading",children:t("games.online")}),e.jsx("p",{className:"games-description",children:t("games.subtitle")}),e.jsx(o.div,{className:"games-cards",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:m.map((r,g)=>{var n;return e.jsx(o.div,{ref:i,initial:"hidden",animate:d?"visible":"hidden",variants:j,transition:{duration:.5,delay:g*.1},className:"game-card",children:e.jsx(c,{hoverable:!0,cover:e.jsx("img",{alt:r.title_en,src:`${l}/${(n=r.assets[0])==null?void 0:n.url}`}),children:e.jsx(c.Meta,{title:e.jsx("span",{className:"game-title",children:r.title_en})})})},r.id)})})]})};export{w as default};
